apply plugin: "java"
apply plugin: "war"
apply plugin: "jetty"
apply plugin: "groovy"
apply plugin: "idea"
apply plugin: "eclipse"

repositories {
  maven {
    url "http://repo.springsource.org/release"
  }
  maven {
    url "http://repo.springsource.org/milestone"
  }
  maven {
    url "http://sass-java.googlecode.com/svn/repo"
  }
  mavenCentral()
}

version = "1.0-SNAPSHOT"
group = "change.me"
projectName = "changeme"

targetCompatibility = "1.6"
sourceCompatibility = "1.6"

configurations {
  all*.exclude group: "commons-logging"
}

war {
  baseName = projectName
}

jettyRun {
  contextPath = "/"
}

processResources {
  filter(org.apache.tools.ant.filters.ReplaceTokens,
          tokens: [
                  LOGBACK_SYSLOG_HOST: LOGBACK_SYSLOG_HOST,
                  LOGBACK_SYSLOG_PORT: LOGBACK_SYSLOG_PORT,
                  LOGBACK_APPENDER: LOGBACK_APPENDER,
                  LOGBACK_LOG_FILE_LOCATION: LOGBACK_LOG_FILE_LOCATION,
                  HIBERNATE_DIALECT: HIBERNATE_DIALECT,
                  DATABASE_PASSWORD: DATABASE_PASSWORD,
                  DATABASE_URL: DATABASE_URL,
                  DATABASE_USERNAME: DATABASE_USERNAME,
                  DATABASE_DRIVER_CLASSNAME: DATABASE_DRIVER_CLASSNAME,
          ])
}

//*** Versions ***
SPRING_VERSION = "3.1.0.RELEASE"
SPRING_SECURITY_VERSION = "3.1.0.RELEASE"
TILES_VERSION = "2.2.2"
SLF4J_VERSION = "1.6.4"
HIBERNATE_VERSION = "4.0.1.Final"

hibernate = [
        "org.hibernate:hibernate-core:$HIBERNATE_VERSION",
        "org.hibernate:hibernate-validator:4.2.0.Final",
        "org.hibernate:hibernate-entitymanager:$HIBERNATE_VERSION",
        "org.hibernate.javax.persistence:hibernate-jpa-2.0-api:1.0.1.Final"]

dependencies {
  groovy("org.codehaus.groovy:groovy-all:1.8.5")
  providedCompile("javax.servlet:servlet-api:2.5", "javax.el:el-api:2.2", "javax.servlet.jsp:jsp-api:2.2")
  testCompile("junit:junit:4.10", "org.easymock:easymock:3.1")
  // ** Hibernate **
  hibernate.collect {
    compile(it) {
      exclude(group: "cglib", name: "cglib")
      exclude(group: "org.jboss.spec.javax.transaction", name: "jboss-transaction-api_1.1_spec")
    }
  }
  compile("org.springframework.security.oauth:spring-security-oauth:1.0.0.M5") {
    exclude(group: "org.springframework.security")
    exclude(group: "org.springframework")
  }
  compile(// ** Spring **
          "org.springframework:spring-core:$SPRING_VERSION",
          "org.springframework:spring-context:$SPRING_VERSION",
          "org.springframework:spring-aop:$SPRING_VERSION",
          "org.springframework:spring-aspects:$SPRING_VERSION",
          "org.springframework:spring-tx:$SPRING_VERSION",
          "org.springframework:spring-jdbc:$SPRING_VERSION",
          "org.springframework:spring-orm:$SPRING_VERSION",
          "org.springframework:spring-web:$SPRING_VERSION",
          "org.springframework:spring-webmvc:$SPRING_VERSION",
          "org.springframework:spring-context-support:$SPRING_VERSION",
          "org.springframework:spring-test:$SPRING_VERSION",
          // ** Spring Security **
          "org.springframework.security:spring-security-core:$SPRING_SECURITY_VERSION",
          "org.springframework.security:spring-security-config:$SPRING_SECURITY_VERSION",
          "org.springframework.security:spring-security-web:$SPRING_SECURITY_VERSION",
          // ** Spring Data JPA **
          "org.springframework.data:spring-data-jpa:1.0.2.RELEASE",
          // ** Scribe OAuth **
          "org.scribe:scribe:1.3.0",
          // ** Apache Tiles **
          "org.apache.tiles:tiles-core:$TILES_VERSION",
          "org.apache.tiles:tiles-jsp:$TILES_VERSION",
          // ** SASS **
          "com.sass-lang:sass-java:3.1.1.4",
          // ** Apache Commons **
          "commons-fileupload:commons-fileupload:1.2.2",
          "commons-digester:commons-digester:2.1",
          "commons-lang:commons-lang:2.6",
          "commons-pool:commons-pool:1.6",
          "commons-codec:commons-codec:1.6",
          // ** BoneCP **
          "com.jolbox:bonecp:0.7.1.RELEASE",
          // ** FlyWay **
          "com.googlecode.flyway:flyway-core:1.5",
          // ** SLF4J **
          "org.slf4j:slf4j-api:$SLF4J_VERSION",
          "org.slf4j:jcl-over-slf4j:$SLF4J_VERSION",
          // ** LogBack **
          "ch.qos.logback:logback-core:1.0.0",
          "ch.qos.logback:logback-classic:1.0.0",
          // ** Other **
          "joda-time:joda-time:2.0",
          "org.codehaus.jackson:jackson-mapper-asl:1.9.3",
          "cglib:cglib-nodep:2.2.2",
          // ** Database **
          "org.hsqldb:hsqldb:2.2.4",
          "mysql:mysql-connector-java:5.1.18",
          // ** Javax **
          "javax.mail:mail:1.4.1",
          "javax.activation:activation:1.1.1",
          "javax.servlet:jstl:1.2",
          "javax.transaction:jta:1.1",
          "javax.validation:validation-api:1.0.0.GA",
  )
}
