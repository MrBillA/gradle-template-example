apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'jetty'
apply plugin: 'idea'
apply plugin: 'eclipse'

repositories {
  mavenLocal()
  mavenCentral()
}

version = '1.0-SNAPSHOT'
group = 'come.edify'

targetCompatibility = '1.6'
sourceCompatibility = '1.6'

[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

springVersion = '3.0.5.RELEASE'
springSecurityVersion = '3.0.5.RELEASE'
aspectjVersion = '1.6.11'
tilesVersion = '2.2.2'
slf4jVersion = '1.6.1'

configurations {
  runtime.transitive = true
  testRuntime.transitive = true
  all*.exclude group: 'commons-logging'
}

hibernate = [
        'org.hibernate:hibernate-core:3.6.6.Final',
        'org.hibernate:hibernate-validator:4.2.0.Final',
        'org.hibernate:hibernate-entitymanager:3.6.6.Final',
        'org.hibernate.javax.persistence:hibernate-jpa-2.0-api:1.0.1.Final',
]

dependencies {
  providedRuntime('javax.servlet:servlet-api:2.5', 'javax.el:el-api:1.0', 'javax.servlet.jsp:jsp-api:2.1')
  testRuntime('junit:junit:4.8.2')
  // ** Hibernate **
  hibernate.collect {
    runtime(it) {
      exclude(group: 'cglib', name: 'cglib')
      exclude(group: 'dom4j', name: 'dom4j')
    }
  }
  runtime(
          // ** Spring **
          "org.springframework:spring-core:$springVersion",
          "org.springframework:spring-context:$springVersion",
          "org.springframework:spring-aop:$springVersion",
          "org.springframework:spring-aspects:$springVersion",
          "org.springframework:spring-tx:$springVersion",
          "org.springframework:spring-jdbc:$springVersion",
          "org.springframework:spring-orm:$springVersion",
          "org.springframework:spring-web:$springVersion",
          "org.springframework:spring-webmvc:$springVersion",
          "org.springframework:spring-context-support:$springVersion",
          "org.springframework:spring-test:$springVersion",
          // ** Spring Security **
          "org.springframework.security:spring-security-core:$springSecurityVersion",
          "org.springframework.security:spring-security-config:$springSecurityVersion",
          "org.springframework.security:spring-security-web:$springSecurityVersion",
          "org.springframework.security:spring-security-taglibs:$springSecurityVersion",
          // ** Spring Data JPA **
          'org.springframework.data:spring-data-jpa:1.0.0.RELEASE',
          // ** AspectJ **
          "org.aspectj:aspectjweaver:$aspectjVersion",
          "org.aspectj:aspectjrt:$aspectjVersion",
          // ** Apache Tiles **
          "org.apache.tiles:tiles-core:$tilesVersion",
          "org.apache.tiles:tiles-jsp:$tilesVersion",
          // ** Apache Commons **
          'commons-fileupload:commons-fileupload:1.2.1',
          'commons-digester:commons-digester:2.0',
          'commons-lang:commons-lang:2.6',
          'commons-pool:commons-pool:1.5.4',
          'commons-dbcp:commons-dbcp:1.4',
          // ** SLF4J **
          "org.slf4j:slf4j-api:$slf4jVersion",
          "org.slf4j:jcl-over-slf4j:$slf4jVersion",
          "org.slf4j:slf4j-log4j12:$slf4jVersion",
          // ** Log4j **
          'log4j:log4j:1.2.16',
          // ** Other **
          'joda-time:joda-time:1.6',
          'net.sf.flexjson:flexjson:2.1',
          'cglib:cglib-nodep:2.2',
          // Database
          'org.hsqldb:hsqldb:2.2.4',
          'mysql:mysql-connector-java:5.1.17',
          // Javax
          'javax.mail:mail:1.4.1',
          'javax.activation:activation:1.1.1',
          'javax.servlet:jstl:1.2',
          'javax.transaction:jta:1.1',
          'javax.validation:validation-api:1.0.0.GA'
  )
}
